(this.webpackJsonpbasicos=this.webpackJsonpbasicos||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/logo.20e55eb8.png"},41:function(e,t,a){e.exports=a(73)},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(16),o=a.n(c),l=a(15),s=a(5),u=a(14),i=a(1),m=a(3),p=Object(r.createContext)(),d=Object(r.createContext)(),b=function(e){var t=Object(r.useContext)(p),a=t.alerta,c=t.mostrarAlerta,o=Object(r.useContext)(d),s=o.mensaje,b=o.autenticado,E=o.iniciarSesion;Object(r.useEffect)((function(){b&&e.history.push("/proyecto"),s&&c(s.msg,s.categoria)}),[s,b,e.history]);var f=Object(r.useState)({email:"",password:""}),O=Object(m.a)(f,2),v=O[0],y=O[1],h=v.email,j=v.password,R=function(e){y(Object(i.a)(Object(i.a)({},v),{},Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.categoria)},a.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==h.trim()&&""!==j.trim()||c("Todos los campos son obligatorios","alerta-error"),E({email:h,password:j})}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:h,onChange:R})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:j,onChange:R})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),n.a.createElement(l.b,{to:"nueva-cuenta",className:"enlace-cuenta"},"Obtener Cuenta")))},E=function(e){var t=Object(r.useContext)(p),a=t.alerta,c=t.mostrarAlerta,o=Object(r.useContext)(d),s=o.mensaje,b=o.autenticado,E=o.registrarUsuario;Object(r.useEffect)((function(){b&&e.history.push("/proyecto"),s&&c(s.msg,s.categoria)}),[s,b,e.history]);var f=Object(r.useState)({nombre:"",email:"",password:"",confirmar:""}),O=Object(m.a)(f,2),v=O[0],y=O[1],h=v.nombre,j=v.email,R=v.password,g=v.confirmar,A=function(e){y(Object(i.a)(Object(i.a)({},v),{},Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.categoria)},a.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Obtener una cuenta"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==h.trim()&&""!==j.trim()&&""!==R.trim()&&""!==g.trim()?R.length<6?c("El password debe ser de al menos 6 caracteres","alerta-error"):R===g?E({nombre:h,email:j,password:R}):c("Los passwords no son iguales","alerta-error"):c("Todos los Campos son obligarios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"nombre"},"Nombre"),n.a.createElement("input",{type:"text",id:"nombre",name:"nombre",placeholder:"Tu nombre",value:h,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",value:j,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",value:R,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Confirmar Password"),n.a.createElement("input",{type:"password",id:"password",name:"confirmar",placeholder:"Repite tu Password",value:g,onChange:A})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Registrarme"}))),n.a.createElement(l.b,{to:"/",className:"enlace-cuenta"},"Volver a Iniciar Sesion")))},f=a(37),O=a.n(f),v=a(2),y=a.n(v),h=a(6),j=Object(r.createContext)(),R=a(8),g=function(e){var t=e.datos,a=e.title;return console.log("desde Tabla",t),n.a.createElement("div",{class:"card"},n.a.createElement("div",{class:"card-header border-0"},n.a.createElement("h3",{class:"card-title"},a),n.a.createElement("div",{class:"card-tools"},n.a.createElement("a",{href:"#",class:"btn btn-tool btn-sm"},n.a.createElement("i",{class:"fas fa-download"})))),"Programas"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nombre"),n.a.createElement("th",null,"Precio Base"),n.a.createElement("th",null,"Precio Base Plataforma"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.priceBase),n.a.createElement("td",null,e.priceBasePlataforma))}))))):null,"Sedes"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nombre"),n.a.createElement("th",null,"Comerce Code"),n.a.createElement("th",null,"Sede Info"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.commerceCode),n.a.createElement("td",null,"boton"))}))))):null,"Regiones"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nombre"),n.a.createElement("th",null,"Country_Id"),n.a.createElement("th",null,"Active"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.countryId),n.a.createElement("td",null,e.active))}))))):null,"Ciudades"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nombre"),n.a.createElement("th",null,"Region_ID"),n.a.createElement("th",null,"Active"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.regionId),n.a.createElement("td",null,e.active))}))))):null,"Comunas"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nombre"),n.a.createElement("th",null,"Region_ID"),n.a.createElement("th",null,"Active"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.regionId),n.a.createElement("td",null,e.active))}))))):null,"Ramos"===a?n.a.createElement("div",{class:"card-body table-responsive p-0"},n.a.createElement("table",{class:"table table-striped table-valign-middle"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"ID"),n.a.createElement("th",null,"Ramos"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.id),n.a.createElement("td",null,e.name))}))))):null)},A=a(52),T=function(e){var t=a(22),c=e.setOpcion,o=Object(r.useState)({}),l=Object(m.a)(o,2),s=l[0],u=l[1],i=Object(r.useState)({}),p=Object(m.a)(i,2),d=p[0],b=p[1],E=Object(r.useState)({}),f=Object(m.a)(E,2),O=f[0],v=f[1],j=Object(r.useState)({}),T=Object(m.a)(j,2),C=T[0],k=T[1],w=Object(r.useState)({}),x=Object(m.a)(w,2),N=x[0],_=x[1],I=Object(r.useState)({}),S=Object(m.a)(I,2),P=S[0],L=S[1];Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var t,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("http://qaerpdv.preupdv.cl",":").concat(8090,"/v1/carro/programas"),e.next=3,A(t,{method:"GET",headers:{"Content-Type":"application/json",Accept:"*/*","Cache-Control":"no-cache",Host:"".concat(t.replace("http://","").replace("https://",""),":8090"),"Content-Length":"746",Connection:"keep-alive"}});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log("cantidad de elementos ",Object(R.size)(r)),u(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://erpdv.preupdv.cl:8090/v1/carro/sedes",e.next=3,t.get("http://erpdv.preupdv.cl:8090/v1/carro/sedes");case 3:a=e.sent,console.log("cantidad de elementos ",Object(R.size)(a.data)),b(a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://erpdv.preupdv.cl:8090/v1/carro/regiones",e.next=3,t.get("http://erpdv.preupdv.cl:8090/v1/carro/regiones");case 3:a=e.sent,console.log("cantidad de elementos ",Object(R.size)(a.data)),v(a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://erpdv.preupdv.cl:8090/v1/carro/ciudad/all",e.next=3,t.get("http://erpdv.preupdv.cl:8090/v1/carro/ciudad/all");case 3:a=e.sent,console.log("cantidad de elementos ",Object(R.size)(a.data)),k(a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://erpdv.preupdv.cl:8090/v1/carro/ramos",e.next=3,t.get("http://erpdv.preupdv.cl:8090/v1/carro/ramos");case 3:a=e.sent,console.log("cantidad de elementos ",Object(R.size)(a.data)),L(a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(h.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://erpdv.preupdv.cl:8090/v1/carro/comuna/all",e.next=3,t.get("http://erpdv.preupdv.cl:8090/v1/carro/comuna/all");case 3:a=e.sent,console.log("cantidad de elementos ",Object(R.size)(a.data)),_(a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return n.a.createElement(r.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:O,title:"Regiones"}))}},"Regiones ",Object(R.size)(O)),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:C,title:"Ciudades"}))}},"Ciudades ",Object(R.size)(C)),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:N,title:"Comunas"}))}},"Comunas ",Object(R.size)(N)),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:s,title:"Programas"}))}},"Programas ",Object(R.size)(s)),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:d,title:"Sedes"}))}},"Sedes ",Object(R.size)(d)),n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(){c(n.a.createElement(g,{datos:P,title:"Ramos"}))}},"Ramos ",Object(R.size)(P)))},C=Object(r.createContext)(),k=(a(75),a(74),function(e){var t=e.setOpcion;return n.a.createElement("aside",null,n.a.createElement("a",{href:"https://www.preuniversitariopedrodevaldivia.cl/"},n.a.createElement("img",{src:O.a,className:"logo-app",alt:"logo"})),n.a.createElement("h1",null,"DASHBOARD",n.a.createElement("span",null)),n.a.createElement(T,{setOpcion:t}))}),w=function(){var e=Object(r.useContext)(d),t=e.usuario,a=e.usuarioAutenticado,c=e.cerrarSesion;return Object(r.useEffect)((function(){a()}),[]),n.a.createElement("header",{className:"app-header"},t?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,t.nombre)):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:function(){return c()}},"Cerrar Sesi\xf3n")))},x=function(){var e=Object(r.useContext)(j).proyecto,t=Object(r.useContext)(C),a=t.tareaseleccionada,c=t.errortarea,o=t.agregarTarea,l=t.validarTarea,s=t.obtenerTareas,p=t.actualizarTarea,d=t.limpiarTarea;Object(r.useEffect)((function(){O(null!==a?a:{nombre:""})}),[a]);var b=Object(r.useState)({producto:"",nombre:""}),E=Object(m.a)(b,2),f=E[0],O=E[1],v=f.nombre;f.comentario;if(!e)return null;var y=Object(m.a)(e,1)[0];return n.a.createElement("div",{className:"formulario"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()?(null===a?(f.proyecto=y._id,o(f)):(p(f),d()),s(y.id),O({nombre:""})):l()}},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Acciones...",name:"nombre",value:v,onChange:function(e){O(Object(i.a)(Object(i.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:a?"Editar Pedido":"Agregar Pedido"}))),c?n.a.createElement("p",{className:"mensaje error"},"El nombre del local es obligatorio"):null)},N=function(){var e=Object(r.useContext)(d).usuarioAutenticado,t=Object(r.useState)(void 0),a=Object(m.a)(t,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){e()}),[]),n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(k,{setOpcion:o}),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(w,null),n.a.createElement("main",null,n.a.createElement(x,null),n.a.createElement("div",{className:"contenedor-tareas"},c))))};var _=a(20),I=function(e,t){switch(t.type){case"FORMULARIO_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{formulario:!0});case"OBTENER_PROYECTOS":return Object(i.a)(Object(i.a)({},e),{},{proyectos:t.payload});case"AGREGAR_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{proyectos:[].concat(Object(_.a)(e.proyectos),[t.payload]),formulario:!1,errorformulario:!1});case"VALIDAR_FORMULARIO":return Object(i.a)(Object(i.a)({},e),{},{errorformulario:!0});case"PROYECTO_ACTUAL":return Object(i.a)(Object(i.a)({},e),{},{proyecto:e.proyectos.filter((function(e){return e._id===t.payload}))});case"ELIMINAR_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{proyectos:e.proyectos.filter((function(e){return e._id!==t.payload})),proyecto:null});case"PROYECTO_ERROR":return Object(i.a)(Object(i.a)({},e),{},{mensaje:t.payload});default:return e}},S=a(22),P=a.n(S).a.create({baseURL:"https://ancient-brushlands-74791.herokuapp.com/"}),L=function(e){var t=Object(r.useReducer)(I,{proyectos:[],formulario:!1,errorformulario:!1,proyecto:null,mensaje:null}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(h.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/api/proyectos");case 3:t=e.sent,o({type:"OBTENER_PROYECTOS",payload:t.data.proyectos}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/api/proyectos",t);case 3:a=e.sent,console.log(a),o({type:"AGREGAR_PROYECTO",payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(h.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete("/api/proyectos/".concat(t));case 3:o({type:"ELIMINAR_PROYECTO",payload:t}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error",categoria:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(j.Provider,{value:{proyectos:c.proyectos,formulario:c.formulario,errorformulario:c.errorformulario,proyecto:c.proyecto,mensaje:c.mensaje,mostrarFormulario:function(){o({type:"FORMULARIO_PROYECTO"})},obtenerProyectos:l,agregarProyecto:s,mostrarError:function(){o({type:"VALIDAR_FORMULARIO"})},proyectoActual:function(e){o({type:"PROYECTO_ACTUAL",payload:e})},eliminarProyecto:u}},e.children)},G=function(e,t){switch(t.type){case"TAREAS_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:t.payload});case"AGREGAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:[t.payload].concat(Object(_.a)(e.tareasproyecto)),errortarea:!1});case"VALIDAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{errortarea:!0});case"ELIMINAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:e.tareasproyecto.filter((function(e){return e._id!==t.payload}))});case"ACTUALIZAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:e.tareasproyecto.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"TAREA_ACTUAL":return Object(i.a)(Object(i.a)({},e),{},{tareaseleccionada:t.payload});case"LIMPIAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareaseleccionada:null});default:return e}},U=function(e){var t=Object(r.useReducer)(G,{tareasproyecto:[],errortarea:!1,tareaseleccionada:null}),a=Object(m.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(h.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/api/tareas",{params:{proyecto:t}});case 3:a=e.sent,o({type:"TAREAS_PROYECTO",payload:a.data.tareas}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/api/tareas",t);case 3:a=e.sent,o({type:"AGREGAR_TAREA",payload:a.data.tarea}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(h.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete("/api/tareas/".concat(t),{params:{proyecto:a}});case 3:o({type:"ELIMINAR_TAREA",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(h.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.put("/api/tareas/".concat(t._id),t);case 3:a=e.sent,o({type:"ACTUALIZAR_TAREA",payload:a.data.tarea}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(C.Provider,{value:{tareasproyecto:c.tareasproyecto,errortarea:c.errortarea,tareaseleccionada:c.tareaseleccionada,obtenerTareas:l,agregarTarea:s,validarTarea:function(){o({type:"VALIDAR_TAREA"})},eliminarTarea:u,guardarTareaActual:function(e){o({type:"TAREA_ACTUAL",payload:e})},actualizarTarea:i,limpiarTarea:function(){o({type:"LIMPIAR_TAREA"})}}},e.children)},Y=function(e,t){switch(t.type){case"MOSTRAR_ALERTA":return{alerta:t.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},z=function(e){var t=Object(r.useReducer)(Y,{alerta:null}),a=Object(m.a)(t,2),c=a[0],o=a[1];return n.a.createElement(p.Provider,{value:{alerta:c.alerta,mostrarAlerta:function(e,t){o({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:t}}),setTimeout((function(){o({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)},D=function(e,t){switch(t.type){case"REGISTRO_EXITOSO":case"LOGIN_EXITOSO":return localStorage.setItem("token",t.payload.token),Object(i.a)(Object(i.a)({},e),{},{autenticado:!0,mensaje:null,cargando:!1});case"OBTENER_USUARIO":return Object(i.a)(Object(i.a)({},e),{},{autenticado:!0,usuario:t.payload,cargando:!1});case"CERRAR_SESION":case"LOGIN_ERROR":case"REGISTRO_ERROR":return localStorage.removeItem("token"),Object(i.a)(Object(i.a)({},e),{},{token:null,usuario:null,autenticado:!1,mensaje:t.payload,cargando:!1});case"REGISTRO_ERROR":return Object(i.a)(Object(i.a)({},e),{},{token:null,mensaje:t.payload});default:return e}},F=function(e){e?P.defaults.headers.common["x-auth-token"]=e:delete P.defaults.headers.common["x-auth-token"]},M=function(e){var t={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:!0},a=Object(r.useReducer)(D,t),c=Object(m.a)(a,2),o=c[0],l=c[1],s=function(){var e=Object(h.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/api/usuarios",t);case 3:a=e.sent,console.log(a.data),l({type:"REGISTRO_EXITOSO",payload:a.data}),u(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"REGISTRO_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(h.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&F(t),e.prev=2,e.next=5,P.get("/api/auth");case 5:a=e.sent,l({type:"OBTENER_USUARIO",payload:a.data.usuario}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),l({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(h.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/api/auth",t);case 3:a=e.sent,l({type:"LOGIN_EXITOSO",payload:a.data}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"LOGIN_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(d.Provider,{value:{token:o.token,autenticado:o.autenticado,usuario:o.usuario,mensaje:o.mensaje,cargando:o.cargando,registrarUsuario:s,iniciarSesion:i,usuarioAutenticado:u,cerrarSesion:function(){l({type:"CERRAR_SESION"})}}},e.children)},B=a(38),H=function(e){var t=e.component,a=Object(B.a)(e,["component"]),c=Object(r.useContext)(d),o=c.autenticado,l=c.cargando,u=c.usuarioAutenticado;return Object(r.useEffect)((function(){u()}),[]),n.a.createElement(s.b,Object.assign({},a,{render:function(e){return o||l?n.a.createElement(t,e):n.a.createElement(s.a,{to:"/"})}}))},V=localStorage.getItem("token");V&&F(V);var X=function(){return(new Date).getFullYear(),console.log("https://ancient-brushlands-74791.herokuapp.com/"),n.a.createElement(L,null,n.a.createElement(U,null,n.a.createElement(z,null,n.a.createElement(M,null,n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:b}),n.a.createElement(s.b,{exact:!0,path:"/nueva-cuenta",component:E}),n.a.createElement(H,{exact:!0,path:"/proyecto",component:N})))))))};a(71),a(72),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.eeffd78a.chunk.js.map